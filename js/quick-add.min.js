(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

jQuery(function ($) {
	var $modal = $('#plt-quick-add');
	var $form = $modal.find('form:first');
	var $saveDraft = $('#plt-quick-add-save');
	var $publish = $('#plt-quick-add-publish');
	var $menuItem = $('a[href$="post_type=page&page=plt-add-page-link"]');
	var $messages = $modal.find('.messages');
	var $shortUrlMessage = $modal.find('.short-url-message');
	var $title = $modal.find('[name="title"]');
	var $url = $modal.find('[name="url"]');
	var $slug = $modal.find('[name="slug"]');
	var nonce = $modal.find('[name="plt_nonce"]').val();
	var defaultSlugPlaceholder = $slug.prop('placeholder');
	var yes = true,
	    no = false;


	var modalAction = function modalAction(action) {
		return function () {
			return $modal.dialog(action);
		};
	};
	var isOpen = modalAction('isOpen');
	var open = modalAction('open');
	var close = modalAction('close');

	var makeSlugFromTitle = function makeSlugFromTitle() {
		var title = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

		return title.toLowerCase().replace(/\s+/g, '-').replace(/-{2,}/g, '-').replace(/[^a-z0-9-]/, '').replace(/-$/, '').replace(/^-/, '');
	};

	var makeSlugFromSlug = function makeSlugFromSlug() {
		var slug = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

		return slug.toLowerCase().replace(/\s+/g, '-').replace(/-{2,}/g, '-').replace(/[^a-z0-9-]/, '').replace(/^-/, '');
	};

	var addMessage = function addMessage(message) {
		var $newMessage = $('<p>' + message + '</p>');
		$messages.append($newMessage);
		return $newMessage;
	};

	var addExpiringMessage = function addExpiringMessage(message, duration) {
		var $newMessage = addMessage(message);
		setTimeout(function () {
			return $newMessage.fadeOut();
		}, duration);
		return $newMessage;
	};

	var displayShortUrlMessage = function displayShortUrlMessage(show) {
		return $shortUrlMessage.toggle(show);
	};

	var updateSlug = function updateSlug() {
		var placeholderSlug = makeSlugFromTitle($title.val());
		var slug = makeSlugFromSlug($slug.val());

		$slug.prop('placeholder', placeholderSlug.length ? placeholderSlug : defaultSlugPlaceholder);
		$slug.val(slug);
	};

	var noDefaultEvent = function noDefaultEvent(func) {
		return function (e) {
			e.preventDefault();
			func();
		};
	};

	var hardUpdateSlug = noDefaultEvent(function () {
		return $slug.val(makeSlugFromTitle($slug.val()));
	});

	var handleShowSlugMessage = noDefaultEvent(function () {
		return displayShortUrlMessage($slug.prop('placeholder').length > 16 && !$slug.val().length);
	});

	var reset = function reset() {
		$title.val('');
		$url.val('');
		$slug.val('');
		$slug.prop('placeholder', defaultSlugPlaceholder);
		maybeUpdateButtons();
	};

	var updateButtons = function updateButtons() {
		var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : yes;

		$publish.prop('disabled', !enabled);
		$saveDraft.prop('disabled', !enabled);
	};

	var maybeUpdateButtons = function maybeUpdateButtons() {
		return updateButtons($title.val().length && $url.val().length);
	};

	var submit = function submit() {
		var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
		    _ref$publish = _ref.publish,
		    publish = _ref$publish === undefined ? yes : _ref$publish;

		var title = $title.val();
		var url = $url.val();
		var slug = $slug.val() ? $slug.val() : makeSlugFromTitle(title);

		$.post(ajaxurl, {
			action: 'plt_quick_add',
			plt_title: title,
			plt_url: url,
			plt_slug: slug,
			plt_publish: publish ? 1 : 0,
			plt_nonce: nonce
		}, function (response) {
			var message = response.data.message;

			var delay = 5000;
			reset();
			$title.focus();
			addExpiringMessage(message, delay);
		});
	};

	var clickMenuItem = noDefaultEvent(function () {
		return isOpen() ? close() : open();
	});
	var saveDraft = noDefaultEvent(function () {
		return submit({ publish: no });
	});
	var publish = noDefaultEvent(function () {
		return submit({ publish: yes });
	});

	$modal.dialog({
		title: 'Add Page Link',
		dialogClass: 'wp-dialog',
		autoOpen: no,
		draggable: no,
		width: 'auto',
		modal: yes,
		resizable: no,
		closeOnEscape: yes,
		position: {
			my: 'center',
			at: 'center',
			of: window
		},
		open: function open() {
			return $('.ui-widget-overlay').bind('click', close);
		},
		create: function create() {
			return $('.ui-dialog-titlebar-close').addClass('ui-button');
		}
	});

	// Events.
	$title.keyup(updateSlug);
	$title.keyup(handleShowSlugMessage);
	$slug.keyup(updateSlug);
	$slug.keyup(handleShowSlugMessage);
	$menuItem.click(clickMenuItem);
	$saveDraft.click(saveDraft);
	$publish.click(publish);
	$form.submit(publish);
	$title.keyup(maybeUpdateButtons);
	$url.keyup(maybeUpdateButtons);
	$form.change(maybeUpdateButtons);
	$form.change(hardUpdateSlug);

	// Init.
	reset();
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9xdWljay1hZGQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxPQUFPLGFBQUs7QUFDWCxLQUFNLFNBQVMsRUFBRSxnQkFBRixDQUFmO0FBQ0EsS0FBTSxRQUFRLE9BQU8sSUFBUCxDQUFZLFlBQVosQ0FBZDtBQUNBLEtBQU0sYUFBYSxFQUFFLHFCQUFGLENBQW5CO0FBQ0EsS0FBTSxXQUFXLEVBQUUsd0JBQUYsQ0FBakI7QUFDQSxLQUFNLFlBQVksRUFBRSxrREFBRixDQUFsQjtBQUNBLEtBQU0sWUFBWSxPQUFPLElBQVAsQ0FBWSxXQUFaLENBQWxCO0FBQ0EsS0FBTSxtQkFBbUIsT0FBTyxJQUFQLENBQVksb0JBQVosQ0FBekI7QUFDQSxLQUFNLFNBQVMsT0FBTyxJQUFQLENBQVksZ0JBQVosQ0FBZjtBQUNBLEtBQU0sT0FBTyxPQUFPLElBQVAsQ0FBWSxjQUFaLENBQWI7QUFDQSxLQUFNLFFBQVEsT0FBTyxJQUFQLENBQVksZUFBWixDQUFkO0FBQ0EsS0FBTSxRQUFRLE9BQU8sSUFBUCxDQUFZLG9CQUFaLEVBQWtDLEdBQWxDLEVBQWQ7QUFDQSxLQUFNLHlCQUF5QixNQUFNLElBQU4sQ0FBVyxhQUFYLENBQS9CO0FBWlcsS0FhSixHQWJJLEdBYVEsSUFiUjtBQUFBLEtBYUMsRUFiRCxHQWFjLEtBYmQ7OztBQWVYLEtBQU0sY0FBYyxTQUFkLFdBQWM7QUFBQSxTQUFVO0FBQUEsVUFBTSxPQUFPLE1BQVAsQ0FBYyxNQUFkLENBQU47QUFBQSxHQUFWO0FBQUEsRUFBcEI7QUFDQSxLQUFNLFNBQVMsWUFBWSxRQUFaLENBQWY7QUFDQSxLQUFNLE9BQU8sWUFBWSxNQUFaLENBQWI7QUFDQSxLQUFNLFFBQVEsWUFBWSxPQUFaLENBQWQ7O0FBRUEsS0FBTSxvQkFBb0IsU0FBcEIsaUJBQW9CLEdBQWdCO0FBQUEsTUFBZixLQUFlLHVFQUFQLEVBQU87O0FBQ3pD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STtBQUhLLEdBVEc7QUFjYixRQUFNO0FBQUEsVUFBTSxFQUFFLG9CQUFGLEVBQXdCLElBQXhCLENBQTZCLE9BQTdCLEVBQXNDLEtBQXRDLENBQU47QUFBQSxHQWRPO0FBZWIsVUFBUTtBQUFBLFVBQU0sRUFBRSwyQkFBRixFQUErQixRQUEvQixDQUF3QyxXQUF4QyxDQUFOO0FBQUE7QUFmSyxFQUFkOztBQWtCQTtBQUNBLFFBQU8sS0FBUCxDQUFhLFVBQWI7QUFDQSxRQUFPLEtBQVAsQ0FBYSxxQkFBYjtBQUNBLE9BQU0sS0FBTixDQUFZLFVBQVo7QUFDQSxPQUFNLEtBQU4sQ0FBWSxxQkFBWjtBQUNBLFdBQVUsS0FBVixDQUFnQixhQUFoQjtBQUNBLFlBQVcsS0FBWCxDQUFpQixTQUFqQjtBQUNBLFVBQVMsS0FBVCxDQUFlLE9BQWY7QUFDQSxPQUFNLE1BQU4sQ0FBYSxPQUFiO0FBQ0EsUUFBTyxLQUFQLENBQWEsa0JBQWI7QUFDQSxNQUFLLEtBQUwsQ0FBVyxrQkFBWDtBQUNBLE9BQU0sTUFBTixDQUFhLGtCQUFiO0FBQ0EsT0FBTSxNQUFOLENBQWEsY0FBYjs7QUFFQTtBQUNBO0FBQ0EsQ0FwSkQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJqUXVlcnkoJCA9PiB7XG5cdGNvbnN0ICRtb2RhbCA9ICQoJyNwbHQtcXVpY2stYWRkJyk7XG5cdGNvbnN0ICRmb3JtID0gJG1vZGFsLmZpbmQoJ2Zvcm06Zmlyc3QnKTtcblx0Y29uc3QgJHNhdmVEcmFmdCA9ICQoJyNwbHQtcXVpY2stYWRkLXNhdmUnKTtcblx0Y29uc3QgJHB1Ymxpc2ggPSAkKCcjcGx0LXF1aWNrLWFkZC1wdWJsaXNoJyk7XG5cdGNvbnN0ICRtZW51SXRlbSA9ICQoJ2FbaHJlZiQ9XCJwb3N0X3R5cGU9cGFnZSZwYWdlPXBsdC1hZGQtcGFnZS1saW5rXCJdJyk7XG5cdGNvbnN0ICRtZXNzYWdlcyA9ICRtb2RhbC5maW5kKCcubWVzc2FnZXMnKTtcblx0Y29uc3QgJHNob3J0VXJsTWVzc2FnZSA9ICRtb2RhbC5maW5kKCcuc2hvcnQtdXJsLW1lc3NhZ2UnKTtcblx0Y29uc3QgJHRpdGxlID0gJG1vZGFsLmZpbmQoJ1tuYW1lPVwidGl0bGVcIl0nKTtcblx0Y29uc3QgJHVybCA9ICRtb2RhbC5maW5kKCdbbmFtZT1cInVybFwiXScpO1xuXHRjb25zdCAkc2x1ZyA9ICRtb2RhbC5maW5kKCdbbmFtZT1cInNsdWdcIl0nKTtcblx0Y29uc3Qgbm9uY2UgPSAkbW9kYWwuZmluZCgnW25hbWU9XCJwbHRfbm9uY2VcIl0nKS52YWwoKTtcblx0Y29uc3QgZGVmYXVsdFNsdWdQbGFjZWhvbGRlciA9ICRzbHVnLnByb3AoJ3BsYWNlaG9sZGVyJyk7XG5cdGNvbnN0IFt5ZXMsIG5vXSA9IFt0cnVlLCBmYWxzZV07XG5cblx0Y29uc3QgbW9kYWxBY3Rpb24gPSBhY3Rpb24gPT4gKCkgPT4gJG1vZGFsLmRpYWxvZyhhY3Rpb24pO1xuXHRjb25zdCBpc09wZW4gPSBtb2RhbEFjdGlvbignaXNPcGVuJyk7XG5cdGNvbnN0IG9wZW4gPSBtb2RhbEFjdGlvbignb3BlbicpO1xuXHRjb25zdCBjbG9zZSA9IG1vZGFsQWN0aW9uKCdjbG9zZScpO1xuXG5cdGNvbnN0IG1ha2VTbHVnRnJvbVRpdGxlID0gKHRpdGxlID0gJycpID0+IHtcblx0XHRyZXR1cm4gdGl0bGVcblx0XHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCAnLScpXG5cdFx0XHQucmVwbGFjZSgvLXsyLH0vZywgJy0nKVxuXHRcdFx0LnJlcGxhY2UoL1teYS16MC05LV0vLCAnJylcblx0XHRcdC5yZXBsYWNlKC8tJC8sICcnKVxuXHRcdFx0LnJlcGxhY2UoL14tLywgJycpO1xuXHR9O1xuXG5cdGNvbnN0IG1ha2VTbHVnRnJvbVNsdWcgPSAoc2x1ZyA9ICcnKSA9PiB7XG5cdFx0cmV0dXJuIHNsdWdcblx0XHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCAnLScpXG5cdFx0XHQucmVwbGFjZSgvLXsyLH0vZywgJy0nKVxuXHRcdFx0LnJlcGxhY2UoL1teYS16MC05LV0vLCAnJylcblx0XHRcdC5yZXBsYWNlKC9eLS8sICcnKTtcblx0fVxuXG5cdGNvbnN0IGFkZE1lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xuXHRcdGNvbnN0ICRuZXdNZXNzYWdlID0gJChgPHA+JHttZXNzYWdlfTwvcD5gKTtcblx0XHQkbWVzc2FnZXMuYXBwZW5kKCRuZXdNZXNzYWdlKTtcblx0XHRyZXR1cm4gJG5ld01lc3NhZ2U7XG5cdH1cblxuXHRjb25zdCBhZGRFeHBpcmluZ01lc3NhZ2UgPSAobWVzc2FnZSwgZHVyYXRpb24pID0+IHtcblx0XHRjb25zdCAkbmV3TWVzc2FnZSA9IGFkZE1lc3NhZ2UobWVzc2FnZSk7XG5cdFx0c2V0VGltZW91dCgoKSA9PiAkbmV3TWVzc2FnZS5mYWRlT3V0KCksIGR1cmF0aW9uKTtcblx0XHRyZXR1cm4gJG5ld01lc3NhZ2U7XG5cdH07XG5cblx0Y29uc3QgZGlzcGxheVNob3J0VXJsTWVzc2FnZSA9IChzaG93KSA9PiAkc2hvcnRVcmxNZXNzYWdlLnRvZ2dsZShzaG93KTtcblxuXHRjb25zdCB1cGRhdGVTbHVnID0gKCkgPT4ge1xuXHRcdGNvbnN0IHBsYWNlaG9sZGVyU2x1ZyA9IG1ha2VTbHVnRnJvbVRpdGxlKCR0aXRsZS52YWwoKSk7XG5cdFx0Y29uc3Qgc2x1ZyA9IG1ha2VTbHVnRnJvbVNsdWcoJHNsdWcudmFsKCkpO1xuXG5cdFx0JHNsdWcucHJvcCgncGxhY2Vob2xkZXInLCBwbGFjZWhvbGRlclNsdWcubGVuZ3RoID8gcGxhY2Vob2xkZXJTbHVnIDogZGVmYXVsdFNsdWdQbGFjZWhvbGRlcik7XG5cdFx0JHNsdWcudmFsKHNsdWcpO1xuXHR9O1xuXG5cdGNvbnN0IG5vRGVmYXVsdEV2ZW50ID0gZnVuYyA9PiBlID0+IHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ZnVuYygpO1xuXHR9O1xuXG5cdGNvbnN0IGhhcmRVcGRhdGVTbHVnID0gbm9EZWZhdWx0RXZlbnQoKCkgPT4gJHNsdWcudmFsKG1ha2VTbHVnRnJvbVRpdGxlKCRzbHVnLnZhbCgpKSkpO1xuXG5cdGNvbnN0IGhhbmRsZVNob3dTbHVnTWVzc2FnZSA9IG5vRGVmYXVsdEV2ZW50KCgpID0+IGRpc3BsYXlTaG9ydFVybE1lc3NhZ2UoJHNsdWcucHJvcCgncGxhY2Vob2xkZXInKS5sZW5ndGggPiAxNiAmJiAhJHNsdWcudmFsKCkubGVuZ3RoKSk7XG5cblx0Y29uc3QgcmVzZXQgPSAoKSA9PiB7XG5cdFx0JHRpdGxlLnZhbCgnJyk7XG5cdFx0JHVybC52YWwoJycpO1xuXHRcdCRzbHVnLnZhbCgnJyk7XG5cdFx0JHNsdWcucHJvcCgncGxhY2Vob2xkZXInLCBkZWZhdWx0U2x1Z1BsYWNlaG9sZGVyKTtcblx0XHRtYXliZVVwZGF0ZUJ1dHRvbnMoKTtcblx0fTtcblxuXHRjb25zdCB1cGRhdGVCdXR0b25zID0gKGVuYWJsZWQgPSB5ZXMpID0+IHtcblx0XHQkcHVibGlzaC5wcm9wKCdkaXNhYmxlZCcsICFlbmFibGVkKTtcblx0XHQkc2F2ZURyYWZ0LnByb3AoJ2Rpc2FibGVkJywgIWVuYWJsZWQpO1xuXHR9O1xuXG5cdGNvbnN0IG1heWJlVXBkYXRlQnV0dG9ucyA9ICgpID0+IHVwZGF0ZUJ1dHRvbnMoJHRpdGxlLnZhbCgpLmxlbmd0aCAmJiAkdXJsLnZhbCgpLmxlbmd0aCk7XG5cblx0Y29uc3Qgc3VibWl0ID0gKHsgcHVibGlzaCA9IHllcyB9ID0ge30pID0+IHtcblx0XHRjb25zdCB0aXRsZSA9ICR0aXRsZS52YWwoKTtcblx0XHRjb25zdCB1cmwgPSAkdXJsLnZhbCgpO1xuXHRcdGxldCBzbHVnID0gJHNsdWcudmFsKCkgPyAkc2x1Zy52YWwoKSA6IG1ha2VTbHVnRnJvbVRpdGxlKHRpdGxlKTtcblxuXHRcdCQucG9zdChcblx0XHRcdGFqYXh1cmwsXG5cdFx0XHR7XG5cdFx0XHRcdGFjdGlvbjogJ3BsdF9xdWlja19hZGQnLFxuXHRcdFx0XHRwbHRfdGl0bGU6IHRpdGxlLFxuXHRcdFx0XHRwbHRfdXJsOiB1cmwsXG5cdFx0XHRcdHBsdF9zbHVnOiBzbHVnLFxuXHRcdFx0XHRwbHRfcHVibGlzaDogcHVibGlzaCA/IDEgOiAwLFxuXHRcdFx0XHRwbHRfbm9uY2U6IG5vbmNlLFxuXHRcdFx0fSxcblx0XHRcdHJlc3BvbnNlID0+IHtcblx0XHRcdFx0Y29uc3QgeyBtZXNzYWdlIH0gPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRjb25zdCBkZWxheSA9IDUwMDA7XG5cdFx0XHRcdHJlc2V0KCk7XG5cdFx0XHRcdCR0aXRsZS5mb2N1cygpO1xuXHRcdFx0XHRhZGRFeHBpcmluZ01lc3NhZ2UobWVzc2FnZSwgZGVsYXkpO1xuXHRcdFx0fVxuXHRcdCk7XG5cdH07XG5cblx0Y29uc3QgY2xpY2tNZW51SXRlbSA9IG5vRGVmYXVsdEV2ZW50KCgpID0+IChpc09wZW4oKSA/IGNsb3NlKCkgOiBvcGVuKCkpKTtcblx0Y29uc3Qgc2F2ZURyYWZ0ID0gbm9EZWZhdWx0RXZlbnQoKCkgPT4gc3VibWl0KHsgcHVibGlzaDogbm8gfSkpO1xuXHRjb25zdCBwdWJsaXNoID0gbm9EZWZhdWx0RXZlbnQoKCkgPT4gc3VibWl0KHsgcHVibGlzaDogeWVzIH0pKTtcblxuXHQkbW9kYWwuZGlhbG9nKHtcblx0XHR0aXRsZTogJ0FkZCBQYWdlIExpbmsnLFxuXHRcdGRpYWxvZ0NsYXNzOiAnd3AtZGlhbG9nJyxcblx0XHRhdXRvT3Blbjogbm8sXG5cdFx0ZHJhZ2dhYmxlOiBubyxcblx0XHR3aWR0aDogJ2F1dG8nLFxuXHRcdG1vZGFsOiB5ZXMsXG5cdFx0cmVzaXphYmxlOiBubyxcblx0XHRjbG9zZU9uRXNjYXBlOiB5ZXMsXG5cdFx0cG9zaXRpb246IHtcblx0XHRcdG15OiAnY2VudGVyJyxcblx0XHRcdGF0OiAnY2VudGVyJyxcblx0XHRcdG9mOiB3aW5kb3csXG5cdFx0fSxcblx0XHRvcGVuOiAoKSA9PiAkKCcudWktd2lkZ2V0LW92ZXJsYXknKS5iaW5kKCdjbGljaycsIGNsb3NlKSxcblx0XHRjcmVhdGU6ICgpID0+ICQoJy51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UnKS5hZGRDbGFzcygndWktYnV0dG9uJyksXG5cdH0pO1xuXG5cdC8vIEV2ZW50cy5cblx0JHRpdGxlLmtleXVwKHVwZGF0ZVNsdWcpO1xuXHQkdGl0bGUua2V5dXAoaGFuZGxlU2hvd1NsdWdNZXNzYWdlKTtcblx0JHNsdWcua2V5dXAodXBkYXRlU2x1Zyk7XG5cdCRzbHVnLmtleXVwKGhhbmRsZVNob3dTbHVnTWVzc2FnZSk7XG5cdCRtZW51SXRlbS5jbGljayhjbGlja01lbnVJdGVtKTtcblx0JHNhdmVEcmFmdC5jbGljayhzYXZlRHJhZnQpO1xuXHQkcHVibGlzaC5jbGljayhwdWJsaXNoKTtcblx0JGZvcm0uc3VibWl0KHB1Ymxpc2gpO1xuXHQkdGl0bGUua2V5dXAobWF5YmVVcGRhdGVCdXR0b25zKTtcblx0JHVybC5rZXl1cChtYXliZVVwZGF0ZUJ1dHRvbnMpO1xuXHQkZm9ybS5jaGFuZ2UobWF5YmVVcGRhdGVCdXR0b25zKTtcblx0JGZvcm0uY2hhbmdlKGhhcmRVcGRhdGVTbHVnKTtcblxuXHQvLyBJbml0LlxuXHRyZXNldCgpO1xufSk7XG4iXX0=
